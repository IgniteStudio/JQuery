<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>JQuery | Ajax</title>
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
    <style>
        body {
            font-size: 17px;
            font-family: Arial, Helvetica, sans-serif;
            background: #f4f4f4;
            line-height: 1.5em;
        }

        header {
            background: #333;
            color: #fff;
            padding: 20px;
            text-align: center;
            border-bottom: 4px #000 solid;
            margin-bottom: 10px;
        }

        #container {
            width:90%;
            margin:auto;
            padding: 10px;
        }
        

    </style>

</head>
<body>
    <header>
        <h1>JQuery | Ajax</h1>
    </header>
    <div id="container">
        <div id="result"></div>  
        <ul id="users"></ul>
        <h3>Add Post</h3>
        <form action="https://jsonplaceholder.typicode.com/posts" id="postForm">
            <input type="text" id="title" placeholder="Title"><br>
            <textarea name="" id="body" placeholder="Body" cols="30" rows="10"></textarea><br>
            <input type="submit" value="Go!">
        </form>
    </div>

    <script>
        $(document).ready(function(){
            const result = $('#result');
            const users = $('#users');
            const form = $('#postForm');
            const title = $('#title').val();
            const body = $('#body').val();
            
            /*
            // load method
            result.load('test1.html', function(responseTxt, statusTxt, xhr){
                if(statusTxt == "success"){
                    alert('It went fine!');
                } else if(statusTxt == "error"){
                    alert("Error: " + xhr.statusText);
                }
            });
            
            // GET method
            $.get('test.html', function(data){
                result.html(data);
            })
            
           // getJSON method for retrieving JSON file data
            $.getJSON('users.json', function(data){
                $.each(data, function(i, user){
                    users.append('<li>'+user.firstName+'</li>');    
                });
            });
            

            // Ajax method
            $.ajax({
                method: 'GET',
                url: 'https://jsonplaceholder.typicode.com/posts',
                dataType: 'json'
            }).done(function(data){
                console.log(data);
                $.map(data, function(post, i){
                    result.append('<h3>'+ post.title + '</h3><p>'+post.body+'</p>');
                });
            });
            */
           // Post method
            form.submit(function(e){
                e.preventDefault();

                const url = $(this).attr('action');
                
                $.post(url, {title: title, body: body}).done(function(data){
                        console.log('Post Saved');
                        console.log(data);
                    });
            });
            

        });
      
    </script>

    
</body>
</html>